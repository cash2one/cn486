{% extends ("layout.html") %}

{%- block title -%}
{{ config.SITE_SUBTITLE }}
{%- endblock -%}
{% block site_description %}{{ config.SITE_DESCRIPTION }}{%- endblock -%}
{% block site_keywords %}{{ config.SITE_KEYWORDS }}{%- endblock -%}

{% block js %}
{{ super() }}

{%- endblock -%}

{%- block position %}
    <strong class="">IT技术分享、讨论、问答，力争打造优质IT技术社区</strong>
    <hr class="bs-docs-separator">
{%- endblock %}
{%- block toppan %}
    <div class="pull-right">
    {% if g.user %}
        <a class="btn btn-warning" href="/entry/create/#8_0">{{ _("Post article") }}</a>
    {% endif %}
    </div>
{%- endblock %}


<div class="row-fluid show-grid">

<div class="span4" data-original-title="" title="" style="">
    <div class="box">
        <div class="title">
            <span class="moer">
            <a title="更多创业旅途" href="/venture/17/">更多</a>
            </span>
            <strong>IT那些事</strong>
        </div>
        <div class="teach_list">
            <ul class="unstyled">
                {% for entry in get_by_category(8) %}
                <li><i class="icon-chevron-right trans"></i> <a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title|cutOff20 }}</a> </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
<div class="span4" data-original-title="" title="" style="">
    <div class="box">
        <div class="title">
            <span class="moer">
            <a title="更多创业旅途" href="/venture/17/">更多</a>
            </span>
            <strong>创业旅途</strong>
        </div>
        <div class="teach_list">
            <ul class="unstyled">
                {% for entry in get_by_category(9,1,10) %}
                <li><i class="icon-chevron-right trans"></i> <a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title|cutOff20 }}</a> </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>

<div class="span4" data-original-title="" title="" style="">
    <div class="box">
        <div class="title">
            <span class="moer">
            <a title="更多创业旅途" href="/job/17/">更多</a>
            </span>
            <strong>职业生涯</strong>
        </div>
        <div class="teach_list">
            <ul class="unstyled">
                {% for entry in get_by_category(18) %}
                <li><i class="icon-chevron-right trans"></i> <a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title|cutOff20 }}</a> </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>



</div>

<div class="row-fluid show-grid">
    <div class="span12" data-original-title="" title="">
          <div class="box bb">
                <div class="title">
                    <span class="moer">
                        <a target="_blank" title="我要提问" href="/entry/create/#8_5">我要提问</a>
                    </span>
                    <strong>最新问答</strong>


                </div>
                <div class="teach_list">
                    <ul class="unstyled">
                        {% for entry in get_by_entry_type( 5) %}

                        <li><i class="icon-question-sign trans"></i> <a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title|cutOff35}}</a>
                         <span class="post-data">
                     <strong><a href="{{ url_for('people.index', username=entry.author.username) }}">{{ entry.author.nickname }}</a></strong>
                        发布于
                    {%- if entry.updated_time %}
                        <span><abbr title="{{ entry.updated_time }}" class="time">{{ entry.updated_time|timesince }}</abbr></span>
                    {%- else %}
                        <abbr title="{{ entry.created_time }}" class="time">{{ entry.created_time|timesince }}</abbr>
                    {%- endif %}
                    {%- if entry.num_comments %}
                     最后回复来自
                    <strong>
                        <a href="{% if entry.last_comment.author %}{{ url_for('people.index', username=entry.last_comment.author.username) }}{% else %}{{ entry.last_comment.homepage }}{% endif %}" rel="external nofollow">
                            {{ entry.last_comment.nickname }}
                        </a>
                    </strong>
                    {%- endif %}



                </span>
                <span class="pull-right">
                    <a href="{{ url_for('portal.entry', slug=entry.slug) }}#comments">{{ entry.num_comments }} 回</a> /
                    {{ entry.num_views }} 阅
                </span>


                        </li>
                        {% endfor %}
                    </ul>
                </div>
          </div>
    </div>
</div>
<div class="row-fluid show-grid" style="margin: 10px 0;">
    <div class="span12" data-original-title="" title="">

	</div>
</div>
<div class="row-fluid show-grid">
    <div class="span12" data-original-title="" title="">
         <div class="box bb">
                <div class="title">
                    <span class="moer">
                        <a target="_blank" title="我要提问" href="/entry/create/#8_4">我要提问</a>
                    </span>
                    <strong>最新讨论</strong>


                </div>
                <div class="teach_list">
                    <ul class="unstyled">
                        {% for entry in get_by_entry_type(4) %}

                        <li><i class="icon-comment trans"></i> <a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title|cutOff35}}</a>
                         <span class="post-data">
                     <strong><a href="{{ url_for('people.index', username=entry.author.username) }}">{{ entry.author.nickname }}</a></strong>
                        发布于
                    {%- if entry.updated_time %}
                        <span><abbr title="{{ entry.updated_time }}" class="time">{{ entry.updated_time|timesince }}</abbr></span>
                    {%- else %}
                        <abbr title="{{ entry.created_time }}" class="time">{{ entry.created_time|timesince }}</abbr>
                    {%- endif %}
                    {%- if entry.num_comments %}
                     最后回复来自
                    <strong>
                        <a href="{% if entry.last_comment.author %}{{ url_for('people.index', username=entry.last_comment.author.username) }}{% else %}{{ entry.last_comment.homepage }}{% endif %}" rel="external nofollow">
                            {{ entry.last_comment.nickname }}
                        </a>
                    </strong>
                    {%- endif %}



                </span>
                <span class="pull-right">
                    <a href="{{ url_for('portal.entry', slug=entry.slug) }}#comments">{{ entry.num_comments }} 评</a> /
                    {{ entry.num_views }} 阅
                </span>


                        </li>
                        {% endfor %}
                    </ul>
                </div>
          </div>
    </div>
</div>

<div class="row-fluid show-grid" style="margin: 10px 0;">
    <div class="span12" data-original-title="" title="">
	</div>
</div>

<div class="row-fluid show-grid">
    <div class="span4" data-original-title="" title="" style="">
        <div class="box">
            <div class="title">
                <span class="moer">
                <a title="更多创业旅途" href="/venture/17/">更多</a>
                </span>
                <strong>交互设计</strong>
            </div>
            <div class="teach_list">
                <ul class="unstyled">
                    {% for entry in get_by_category(16) %}
                    <li><i class="icon-chevron-right trans"></i> <a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title }}</a> </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
    <div class="span4" data-original-title="" title="" style="">
        <div class="box">
            <div class="title">
                <span class="moer">
                <a title="更多创业旅途" href="/venture/17/">更多</a>
                </span>
                <strong>视觉设计</strong>
            </div>
            <div class="teach_list">
                <ul class="unstyled">
                    {% for entry in get_by_category(17) %}
                    <li><i class="icon-chevron-right trans"></i> <a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title }}</a> </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
<div class="span4" data-original-title="" title="" style="">
    <div class="box">
        <div class="title">
            <span class="moer">
            <a title="更多创业旅途" href="/venture/17/">更多</a>
            </span>
            <strong>用户体验</strong>
        </div>
        <div class="teach_list">
            <ul class="unstyled">
                {% for entry in get_by_category(15) %}
                <li><i class="icon-chevron-right trans"></i> <a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title }}</a> </li>
                {% endfor %}
            </ul>
        </div>
    </div>
</div>
</div>
{%- block entity %}
<div class="row-fluid show-grid">
    <div class="span12" data-original-title="" title="">
        {% if latest_portal_entries %}
        {% for entry in latest_portal_entries(current_page,20) %}
        <!-- Start Blog Post 1 -->
        <div class="list">
            <div class="list-title">

                <h4><a href="{{ url_for('portal.entry', slug=entry.slug) }}">{{ entry.title }}</a></h4>
        <span class="post-data">
            <a class="category" href="{{ url_for('portal.category', category=entry.category.slug, entry_type=17) }}">[{{
                entry.category.category_name }}]</a>
            &nbsp;•&nbsp; <strong><a href="{{ url_for('people.index', username=entry.author.username) }}">{{
            entry.author.nickname }}</a></strong> &nbsp;•&nbsp;
            {%- if entry.updated_time %}
                <span><abbr title="{{ entry.updated_time }}" class="time">{{ entry.updated_time|timesince
                    }}</abbr></span>
            {%- else %}
                <abbr title="{{ entry.created_time }}" class="time">{{ entry.created_time|timesince }}</abbr>
            {%- endif %}
            {%- if entry.num_comments %}
            &nbsp;•&nbsp; 最后回复来自
            <strong>
                <a href="{% if entry.last_comment.author %}{{ url_for('people.index', username=entry.last_comment.author.username) }}{% else %}{{ entry.last_comment.homepage }}{% endif %}"
                   rel="external nofollow">
                    {{ entry.last_comment.nickname }}
                </a>
            </strong>
            {%- endif %}
            <img alt="comment" src="{{ url_for('static', filename='img/comment.gif') }}">
            <a href="{{ url_for('portal.entry', slug=entry.slug) }}#comments">{{ entry.num_comments }} {{ _("Comments")
                }}</a>
           {{ entry.num_views }} {{ _("Views") }}
	       {{ entry.num_favorites }} {{ _("Favorites") }}
        {% if g.user.is_supervisor %}
         &nbsp;&nbsp;&nbsp;&nbsp;
        {% if entry.on_portal %}
        <a name="{{ url_for('entry.on_portal', id=entry.id, enable=0) }}" class="nfsno" href="javascript:void(0);">{{
            _("On Portal") }}</a>&nbsp;
        {% else %}
        <a name="{{ url_for('entry.on_portal', id=entry.id, enable=1) }}" class="nfsno" href="javascript:void(0);">{{
            _("Cancel Portal") }}</a>&nbsp;
        {% endif %}
        {% if entry.on_top %}
        <a name="{{ url_for('entry.on_top', id=entry.id, enable=0) }}" class="nfsno" href="javascript:void(0);">{{ _("On
            Top") }}</a>&nbsp;
        {% else %}
        <a name="{{ url_for('entry.on_top', id=entry.id, enable=1) }}" class="nfsno" href="javascript:void(0);">{{
            _("Cancel Top") }}</a>&nbsp;
        {% endif %}
        {% endif %}
        {% if g.user %}
        <a name="{{ url_for('entry.supports', id=entry.id) }}" class="nfsno" href="javascript:void(0);">{{ _("Supports")
            }}</a>&nbsp;
        <a name="{{ url_for('entry.oppositions', id=entry.id) }}" class="nfsno" href="javascript:void(0);">{{
            _("Oppositions") }}</a>&nbsp;
        <a name="{{ url_for('entry.complain', id=entry.id) }}" class="nfsno" href="javascript:void(0);">{{ _("Complain")
            }}</a>&nbsp;
        {% endif %}

        {% if entry.permissions.can_edit %}
         <a href="{{ url_for('entry.edit', id=entry.id) }}" class="">{{ _("Edit") }}</a>&nbsp;
        {% endif %}
        {% if entry.permissions.can_del %}
        <a href="#" onclick="$('#delete-entries-{{ entry.id }}').toggle(); return false;" class="">{{ _("Delete") }}</a>&nbsp;
        <div id="delete-entries-{{ entry.id }}" style="display:none;">
            <strong>{{ _('Are you sure you want to delete this articles ?') }}</strong>
            <a href="#" onclick="ajax_post('{{ url_for('entry.delete', id=entry.id) }}'); return false;">{{ _('Yes')
                }}</a> /
            <a href="#" onclick="$('#delete-entries-{{ entry.id }}').toggle(); return false;">{{ _('No') }}</a>
        </div>
        {% endif %}
        </span>
            </div>
        </div>
        <!-- End Blog Post 1 -->

        {% endfor %}

        {% endif %}
        <div class="inner">
            {% if entries_total.pages > 1 %}
            <div class="pagination"><ul>
                {% for page_url in page_href(url_for('portal.index'), entries_total.pages, current_page) %}
                {{ page_url|safe }}
                {% endfor %}
            </ul></div>
            {% endif %}
        </div>
    </div>
</div>
{%- endblock %}
{%- block sidebar %}
<!-- Start Blog Categories -->

<div class="box">
    <div class="title">
        <strong>最新标签</strong>
    </div>

    <div >
    {% for tag in hot_tags(None) %}
        <a class="tag" href="{{ url_for('portal.tagged', slug=tag.slug) }}" title="共有{{ tag.num_entries }}个{{ tag.tag_name }}话题">{{ tag.tag_name }}</a>
    {% endfor %}
    </div>

</div>
<div class="box">
    <div class="title">
        <strong>最热话题</strong>
    </div>

    <div class="article-popular">

    {% if hot_entries %}
    <table border="0" width="100%">
    {% for hot_entry in hot_entries() %}
    <tr class="clear" style="border-bottom: 1px dotted #ccc;">
         <td valign="middle" ><i class="icon-fire trans"></i>
    <a href="{{ url_for('portal.entry', slug=hot_entry.slug) }}" title="{{ hot_entry.title }}">{{ hot_entry.title|cutOff20 }}</a>
        </td>
    </tr>
    {% endfor %}
    </table>
    {% endif %}

</div>
</div>

        <div class="box">
            <div class="title">
                <strong>最新回复</strong>
            </div>

    <div class="article-popular">
        {% if latest_comments %}
        <table border="0" width="100%">
            {% for comment in latest_comments %}
            <tr class="clear" style="border-bottom: 1px dotted #ccc;">
                <td valign="middle" ><i class="icon-bullhorn trans"></i>
                <a href="{{ url_for('portal.entry', slug=comment.entry.slug) }}#comment-{{ comment.id }}" title="{{ comment.comment|html_to_text }}">{{ comment.comment|html_to_text|cutOff20 }}</a>
                </td>
            </tr>
            {% endfor %}
        </table>

        {% endif %}
    </div>
    </div>


{%- endblock %}

{%- block link %}
<div class="container  page-body" id="contentwrap">
    <div class=" container-fluid">
        <div class="row-fluid show-grid">
            <div class="span7">
                <h3 class="t2" style="border-bottom: 3px solid #444;">{{ _("Friend link") }}</h3>
                {% for link in friend_links %}
                <a class="t1" href="{{ link.link }}" target="_blank">{{ link.title }}</a>　
                {% endfor %}
            </div>
            <div class="span5">
                <h3 class="t2" style="border-bottom: 3px solid #444;">{{ _("Partner link") }}</h3>
                {% for link in partner_links %}
                <a href="{{ link.link }}" target="_blank"><img alt="{{ link.title }}" src="{{ link.logo }}" border="0"></a>
                {% endfor %}
            </div>
        </div>
    </div>
</div>


{%- endblock %}
{%- block footer %}
{{ super() }}

{%- endblock %}

